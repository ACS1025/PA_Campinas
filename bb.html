<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="src/img/kmd-16x16.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Briefing de Viagem</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-image: url('src/img/Registro de Saidas.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: #333; /* Cor do texto mais suave */
            line-height: 1.6; /* Melhora a legibilidade */
        }
    
        .navbar {
            display: flex;
            justify-content: center;
            background-color: rgba(68, 68, 68, 0.8); /* Fundo levemente transparente */
            position: sticky;
            top: 0;
            width: 100%;
            z-index: 1000;
            padding: 10px 0; /* Adiciona espaçamento vertical */
        }
    
        .navbar a {
            color: rgb(252, 254, 255);
            padding: 14px 20px;
            text-decoration: none;
            text-align: center;
            display: block;
            font-weight: bold;
            transition: background-color 0.3s; /* Efeito suave ao passar o mouse */
        }
    
        .navbar a:hover {
            background-color: #5c83ec;
        }

        .navbar a.active {
            background-color: #FFD600;
            color: #000;
        }

        h2 {
            text-align: center; 
            margin-bottom: 10px;
        }
    
        .container {
            max-width: 870px; /* Define a largura máxima desejada */
            margin: 0 auto; /* Centraliza o conteúdo */
            padding: 15px; /* Adiciona espaçamento lateral */
            background-color: #66afe9;
        }

        .header {
            display: grid; /* Adiciona o display grid */
            grid-template-columns: repeat(4, 1fr); /* Define 5 colunas */
            grid-template-rows: repeat(2, auto); /* Define 2 linhas automáticas */
            gap: 10px;
            border: 1px solid #ccc; /* Cor da borda mais suave */
            border-radius: 8px; /* Bordas arredondadas */
            margin: 12px; /* Margem em torno do cabeçalho */
            padding: 8%; /* Preenchimento interno */
            background-color: rgba(255, 255, 255, 0.9); /* Fundo branco levemente transparente */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra para profundidade */
            margin-bottom: 10px;
        }
    
        .header > div {
            padding: 10px; /* Ajuste o valor conforme necessário */
        }
        .header p, .header .input-box {
            margin: 0;
        }

        .header label {
            display: block;
            margin-bottom: 3px;
        }

        .header input {
            background-color: #d9ead3;
            border: 1px solid #666;
            color: #000;
            width: 100%;
            padding: 4px;
            box-sizing: border-box;
        }

        .header .input-box ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .autocomplete-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            border: 1px solid #ccc;
            max-height: 150px;
            overflow-y: auto;
            position: absolute;
            z-index: 1000;
        }
        .autocomplete-list li {
            padding: 8px;
            cursor: pointer;
        }
        .autocomplete-list li:hover {
            background-color: #ddd;
        }
    
        input[type="text"], input[type="date"], textarea {
            width: 100%; /* Faz os campos ocuparem toda a largura disponível */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px; /* Bordas arredondadas para campos de entrada */
            margin-top: 5px; /* Espaçamento superior */
            margin-bottom: 15px; /* Espaçamento inferior */
            box-sizing: border-box; /* Inclui padding e borda no tamanho total */
            transition: border-color 0.3s; /* Efeito suave na borda */
        }
    
        input[type="text"]:focus, input[type="date"]:focus {
            border-color: #66afe9; /* Cor da borda quando em foco */
            outline: none; /* Remove contorno padrão */
        }

        
    
        button {
            background-color: #19b60b;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
    
        button:hover {
            background-color: #073d05;
        }

        .section h3 {
            color: rgb(219, 32, 32);
            margin-bottom: 5px;
        }

        .section input, .section textarea {
            width: 100%;
            padding: 5px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        .contact-section h3 {
            background-color: yellow;
            padding: 8px;
            margin-bottom: 8px;
            text-align: center;
        }
    
    
        .contact-info {
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center;
        }
    
        .contact-info i {
            font-size: 24px;
            margin-right: 8px;
        }
    
        .phone, .whatsapp {
            display: flex;
            align-items: center;
        }

        #attention-text {
            font-weight: bold;
            color: rgb(15, 15, 17);
            background-color: yellow;
        }

    
       /* Estilos para impressão */
@media print {
    .navbar {
        display: none; /* Oculta a navbar na impressão */
    }

    @page {
        size: A4; /* Define o tamanho da página para A4 */
        margin: 20mm; /* Aumente as margens para evitar que o conteúdo fique muito próximo das bordas */
    }
        /* Oculta os campos de entrada na impressão */
        input[type="text"], input[type="date"], textarea {
            display: none;
        }
    
        /* Exibe o texto gerado */
        .print-text {
            display: inline; /* Torna o texto visível */
        }

    body {
        background-image: none; /* Remove o background da impressão */
        font-size: 12pt; /* Ajusta o tamanho da fonte para melhor leitura */
        margin: 0; /* Remove a margem padrão do body */
        color: #000; /* Cor do texto padrão na impressão */
    }

    /* Ajustes para containers e seções */
    .container {
        margin-bottom: 20mm; /* Espaço entre as seções */
    }

     /* Força nova página antes do segundo conteúdo */
     .second-page {
        page-break-before: always; /* Quebra de página antes desse conteúdo */
     }

        img {
            max-width: 100%;
            height: auto;
            page-break-inside: avoid;
        }

    .header {
        margin: 0 0 20mm 0; /* Adiciona margem inferior para espaçamento */
        border: none; /* Remove a borda na impressão */
    }

    h3 {
        margin-top: 20px; /* Aumenta a margem superior para títulos */
        margin-bottom: 10px; /* Margem inferior dos títulos */
    }

    p {
        margin: 5px 0; /* Margens menores para os parágrafos */
        line-height: 1.5; /* Aumenta a altura da linha para legibilidade */
    }

    img {
        max-width: 100%;
        height: auto; /* Remove margens de imagens para ocupar melhor o espaço */
        page-break-inside: avoid; /* Evita que as imagens sejam cortadas em páginas diferentes */
    }

    button {
        display: none; /* Remove botões na impressão */
    }
}
    </style>
</head>
<body>

    <div class="navbar">
        <a href="index.html" class="active">Home</a>
        <a href="registro-saidas.html">Registro de Saídas</a>
        <a href="solicitacao-escolta.html">Solicitação de Escolta</a>
    </div>

    <div class="container">
        <center>
            <img src="src/img/FormBriefing_Digital.jpg" alt="Cabeçalho Briefing de Viagem" style="max-width: 100%; height: auto;">
        </center>
        
        <div class="header">
            <p><strong>Data:</strong> 
                <input type="date" id="data" required>
                <span class="print-text" id="data-text"></span>
            </p>
            <p><strong>Cód. SM:</strong> 
                <input type="text" id="cod_sm" required>
                <span class="print-text" id="cod-sm-text"></span>
            </p>
            <p><strong>Placa:</strong> 
                <input type="text" id="placa" name="placa" required>
                <span class="print-text" id="placa-text"></span>
            </p>
            <p><strong>Carreta:</strong> 
                <input type="text" id="carreta" required>
                <span class="print-text" id="carreta-text"></span>
            </p>
            <div class="input-box">
                <label for="doc_motorista">Motorista:</label>
                <input type="text" id="doc_motorista" name="doc_motorista" placeholder="Digite o motorista" oninput="buscarMotoristas(this.value)">
                <span class="print-text" id="motorista-text"></span>
            </div>
            <div class="input-box">
                <label for="doc_cliente">Cliente:</label>
                <input type="text" id="doc_cliente" name="doc_cliente" placeholder="Digite a cliente" oninput="buscarClientes(this.value, 'cliente')">
                <span class="print-text" id="cliente-text"></span>
            </div>
            <div class="input-box">
                <label for="doc_destino">Destino:</label>
                <input type="text" id="doc_destino" name="doc_destino" placeholder="Digite a cidade" oninput="buscarCidades(this.value, 'destino'); updateRoute();">
                <span class="print-text" id="destino-text"></span>
            </div>
        </div>
    
        <div class="section">
            <h3>ALERTA:</h3>
            <p id="attention-text"></p>
            <br>
            <P>Senhor Motorista, você está prestes a iniciar uma viagem rastreada com a GR KOMANDO <b>É IMPORTANTE</b> o conhecimento e aceite das regras   a seguir: <b>INFORMAR INÍCIO DE VIAGEM (Via macro de acordo com a sua tecnologia)</b> // INFORMAR PARADAS // INFORMAR PERNOITE // 
                REINÍCIO DE VIAGEM / CHEGADA AO CLIENTE / FINAL DE VIAGEM</P>           
        </div>

        <div class="section">
            <h3>Início de Viagem::</h3>
            <p>Tempo Liberado até 30 Minutos, havendo alguma irregularidade de sensores e atuadores, a viagem não será liberada; Sempre Aguardar o <b>LIBERADO KMD</b>; Durante a espera da mensagem de liberação, o motorista deverá aguardar dentro da cabine, com as travas e portas fechadas.</p>
        </div>

        <div class="section">
            <h3>Paradas:</h3>
            <p>Toda e qualquer parada deverá ser informada através de MACRO DE PARADA, de acordo com o motivo. Obrigatório o preenchimento do motivo da parada com um X e, preferencialmente com previsão de reinicio.</p>
        </div>

        <div class="section">
            <h3>Pontos de Parada e Manutenção</h3>
            <p>Tendo parada programada na viagem, esta foi informada com antecedência para a Supersonic? Havendo a necessidade de paradas para manutenção, informe o tipo de serviço a ser realizado e a macro correta de acordo com o seu equipamento. E informe via mensagem o tipo de serviço que será realizado e se haverá perda de sinal.</p>
        </div>

        <div class="section">
            <h3>Reinício de viagem</h3>
            <p>Deverá ser utilizada para retomar a viagem após qualquer  MACRO DE PARADA ou PERNOITE</p>
        </div>

        <div class="section">
            <h3>Chegada ao Cliente</h3>
            <p>Informar sempre que estiver aguardando descarga / Abertura da cabine é automática Após a chegada no cliente, para a abertura do baú ou desengate da carreta, deverá ser enviado macro quando houver ou mensagem livre (Solicito autorizar abertura de Baú e/ ou Solicito autorizar Desengate da carreta)</p>
        </div>

        <div class="section">
            <h3>Fim de viagem</h3>
            <p>Somente deve ser informado quando o veículo ESTIVER VAZIO. (Desabilitará todos os comandos de segurança manualmente). Ao final da viagem, enviar uma foto do baú vazio ou canhoto para a operação KOMANDO, via whats app.</p>
        </div>

        <div class="section">
            <h3>Segurança no Trânsito</h3>
            <p>Este é um assunto de extrema importância, pois pode representar riscos tanto para os motoristas quanto para os pedestres. Lembrando que a segurança no trânsito é responsabilidade de todos os envolvidos, sejam motoristas, pedestres ou autoridades de trânsito. Seguir essas medidas contribui para a redução de acidentes e a preservação da vida.</p>
        <h2>ORIENTAÇÕES PARA VIAGEM:</h2>
            <p>
            - Respeitar o Código Nacional de Trânsito; (Multas serão de RESPONSABILIDADE do motorista)<br>
            - Manter a Komando Gerenciadora de Riscos sempre informada de qualquer anormalidade;<br>
            - Não é recomendada a parada dentro das áreas de risco definidas em PGR.<br>
            - Proibido pernoite em residência, bem como deixar o veículo no posto e ir para a residência. Não parar em casa de familiares e outros locais quando carregado ou locais que não foram previamente autorizados.
            </p>
              
          <div class="section contact-section">
                    <h3>CONTATO 24 HORAS BASE KOMANDO</h3>
                    <div class="contact-info">
                        <div class="phone">
                            <i class="fas fa-phone-alt"></i>
                            <h2>19 9 8103-2053</h2>
                        </div>
                        <div class="whatsapp">
                            <i class="fab fa-whatsapp"></i>
                            <h2>19 9 8126-0767</h2>
                        </div>
                    </div>
                    <p>"Declaro estar apto a realizar esta viagem até o destino e estar ciente de que devo seguir a rota a mim previamente informada, estando ciente dos procedimentos descritos e apresentados neste briefing de viagem, comprometendo-me a cumpri-los em sua totalidade."></p>
                </div>
                
</div>

        


        <!-- Segunda página -->
    <div class="second-page">
        <center>
        <img src="src/img/FormBriefing_Digital.jpg" alt="Cabeçalho Briefing de Viagem" style="max-width: 100%; height: auto;">
        </center>
    </div>
        <div class="section">
            <p><strong>Rota Informada:</strong></p>
            <textarea id="rota_informada" rows="2" placeholder="Informe a rota"></textarea>
        </div>

        <div class="checkbox-group">
            <p><strong>Questionário:</strong></p>
            <div>
                <label for="pergunta1">Está apto a realizar a viagem hoje?</label>
                <input type="radio" id="pergunta1-sim" name="pergunta1" value="sim">SIM
                <input type="radio" id="pergunta1-nao" name="pergunta1" value="nao">NÃO
            </div>
            <br>
            <div>
                <label for="pergunta2">Tomou algum medicamento hoje?</label>
                <input type="radio" id="pergunta2-sim" name="pergunta2" value="sim">SIM
                <input type="radio" id="pergunta2-nao" name="pergunta2" value="nao">NÃO
            </div>
            <br>
            <div>
                <label for="pergunta3">Caso positivo, informe qual:</label>
                <textarea id="pergunta3-texto" rows="2"></textarea>
            </div>
            <br>
            <div>
                <label for="pergunta4">Chave e rota em mãos?</label>
                <input type="radio" id="pergunta4-sim" name="pergunta4" value="sim">SIM
                <input type="radio" id="pergunta4-nao" name="pergunta4" value="nao">NÃO
            </div>
            <br>
            <div>
                <label for="pergunta5">Compromete-se a respeitar os limites de velocidade?</label>
                <input type="radio" id="pergunta5-sim" name="pergunta5" value="sim">SIM
                <input type="radio" id="pergunta5-nao" name="pergunta5" value="nao">NÃO
            </div>
            <br>
            <br>

            <p><h2>DECLARAÇÃO:</h2>
                Declaro estar ciente dos procedimentos aqui descritos e apresentados no briefing e comprometo-me a cumpri-lo em sua totalidade, assumindo total responsabilidade pelas conseqüências acarretadas pela não cumprimento de tais procedimentos.
            <br>
            Estou ciente da restrição do limite máximo de velocidade de 80 km/h, leis de trânsito, da jornada de trabalho, da rota a ser seguida e postos e procedimentos do rastreamento.  </p>

            <br>

            <div class="signature-section">
                <p>Data: <span id="currentDate"></span></p>
                <br>
                <p>Assinatura: ___________________________________________</p>
                <p><strong>Placa:</strong> <span id="signaturePlaca"></span></p>
                <p><strong>Nome do motorista:</strong> <span id="signatureMotorista"></span></p>
            </div>
        </div>

   
        <button onclick="prepararParaImpressao(); window.print()">Imprimir</button>

    </div>
</div>

    <script>
        // Funções de JavaScript para manipulação do DOM e eventos
        function buscarMotoristas(value) {
            // Implementar a lógica para buscar motoristas
        }

        function buscarClientes(value, type) {
            // Implementar a lógica para buscar clientes
        }

        function buscarCidades(value, type) {
            // Implementar a lógica para buscar cidades
        }

        function updateRoute() {
            // Implementar a lógica para atualizar a rota
        }

        function prepararParaImpressao() {
            document.getElementById('data-text').textContent = document.getElementById('data').value;
            document.getElementById('cod-sm-text').textContent = document.getElementById('cod_sm').value;
            document.getElementById('placa-text').textContent = document.getElementById('placa').value;
            document.getElementById('carreta-text').textContent = document.getElementById('carreta').value;
            document.getElementById('motorista-text').textContent = document.getElementById('doc_motorista').value;
            document.getElementById('cliente-text').textContent = document.getElementById('doc_cliente').value;
            document.getElementById('destino-text').textContent = document.getElementById('doc_destino').value;
        }
        
        window.onbeforeprint = prepararParaImpressao;

        // Função genérica para buscar dados de um arquivo JSON e atualizar a lista
    async function buscarDados(caminho, query, elementoLista, campo) {
        try {
            const response = await fetch(caminho);
            const dados = await response.json();

            const filtro = query.toLowerCase();
            const resultados = dados.filter(item => item[campo].toLowerCase().includes(filtro));

            let lista = '';
            resultados.forEach(item => {
                lista += `<li onclick="selecionarItem('${item[campo]}', '${elementoLista.id}')">${item[campo]}</li>`;
            });

            elementoLista.innerHTML = lista;
        } catch (error) {
            console.error(`Erro ao buscar dados de ${caminho}:`, error);
        }
    }

    // Funções específicas para cada campo
    function buscarPlacas(query) {
        buscarDados('src/json/placas.json', query, document.getElementById('lista-placa'), 'placa');
    }

    function buscarCarretas(query) {
        buscarDados('src/json/carretas.json', query, document.getElementById('lista-carreta'), 'carreta');
    }

    function buscarMotoristas(query) {
        buscarDados('src/json/motoristas.json', query, document.getElementById('lista-motorista'), 'nome');
    }

    function buscarClientes(query) {
        buscarDados('src/json/clientes.json', query, document.getElementById('lista-cliente'), 'nome');
    }

    function buscarCidades(query) {
        buscarDados('src/json/cidades.json', query, document.getElementById('lista-destino'), 'cidade');
    }

    // Função para selecionar um item da lista e preencher o campo de input
    function selecionarItem(valor, listaId) {
        const inputId = listaId.replace('lista-', '');
        document.getElementById(inputId).value = valor;
        document.getElementById(listaId).innerHTML = ''; // Limpa a lista
    }
        
    </script>

</body>
</html>
